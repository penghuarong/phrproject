webpackJsonp([4],{"1uIQ":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("vVw/"),n=a.n(s),r=a("m1qg"),c=a.n(r),i=a("YbOa"),o=a.n(i),l=a("U5hO"),u=a.n(l),m=a("EE81"),p=a.n(m),d=a("Jmyu"),f=a.n(d),h=a("/00i"),_=a.n(h),y=a("9wvh"),E=a.n(y),L=a("NmwX"),v=(a.n(L),a("sUZf")),S=a.n(v),g=a("vLgD"),N=function(t){function e(){var t;return o()(this,e),t=f()(this,_()(e).call(this)),t.startPlay=function(){var e=t.props.trackid,a=Math.floor(Math.random()*t.refs.audio.duration-10);t.setState({time:{start:a,end:a+10},randomSongList:Object(g.c)(e.map(function(t){return t.detail.name}))},function(){t.refs.audio.currentTime=a})},t.timeUpdate=function(){var e=t.state,a=(e.songList,e.currect,c()(document.querySelectorAll(".pDom")));if(t.refs.audio.currentTime>t.state.time.end){if(t.refs.audio.pause(),9==t.state.currect)return;t.setState({currect:t.state.currect+1},function(){t.refs.audio.play()});a.some(function(t){return t.classList.contains("success")||t.classList.contains("error")})||t.setState({listenList:t.state.listenList.concat("\u6ca1\u6709\u7b54\u6848")}),c()(document.querySelectorAll(".pDom")).map(function(t){t.className=t.className.replace(" success","").replace(" error","")})}t.setState({passmess:Math.floor((t.refs.audio.currentTime-t.state.time.start)/10*100)})},t.changePlay=function(){t.setState({isPlay:!t.state.isPlay},function(){t.state.isPlay?t.refs.audio.play():t.refs.audio.pause()})},t.activeP=function(e,a){var s=t.state,n=s.currect,r=s.songList,i=(s.listenList,s.count,c()(document.querySelectorAll(".pDom")));i.some(function(t){return t.classList.contains("success")||t.classList.contains("error")})||(t.setState({listenList:t.state.listenList.concat(e)}),r[n]==e?(i[a].classList.add("success"),t.setState({count:t.state.count+1})):i[a].classList.add("error"))},t.state={songList:[],randomSongList:[],listenList:[],currect:0,passmess:0,isPlay:!0,count:0,time:{start:0,end:0}},t}return p()(e,[{key:"componentDidMount",value:function(){var t=this.props.trackid;this.setState({songList:t.map(function(t){return t.detail.name})})}},{key:"render",value:function(){var t=this,e=this.state,a=e.randomSongList,s=e.currect,n=e.isPlay,r=e.passmess,c=e.songList,i=e.listenList,o=e.count,l=this.props.trackid;return E.a.createElement("div",{className:S.a.wrap},E.a.createElement("div",{className:S.a.header},"\u542c\u6b4c\u8bc6\u66f2"),E.a.createElement("div",{className:S.a.section},E.a.createElement("div",{className:S.a.list},a.map(function(e,a){return E.a.createElement("p",{key:a,className:"pDom",onClick:function(){t.activeP(e,a)}},e)})),E.a.createElement("audio",{src:l[s].info,ref:"audio",autoPlay:!0,onTimeUpdate:function(){t.timeUpdate()},onLoadedMetadata:function(){t.startPlay()}}),E.a.createElement("p",{className:S.a.tit},E.a.createElement("span",{onClick:this.changePlay},n?"\u6682\u505c":"\u64ad\u653e"),E.a.createElement("span",null,"\u6b63\u5728\u64ad\u653e\u8fdb\u5ea6",s+1,"/10")),E.a.createElement("p",{className:S.a.playScroll},E.a.createElement("time",null,"00:",this.currentTime),E.a.createElement("span",{style:{width:"".concat(r,"%")}}),E.a.createElement("time",null,"00.10")),E.a.createElement("div",{className:S.a.bottomBox},E.a.createElement("h2",null,"\u731c\u6b4c\u7ed3\u679c"),c.length>0&&c.map(function(t,e){return E.a.createElement("p",{className:S.a.pBottom,key:e},E.a.createElement("span",null,e+1),E.a.createElement("span",null,i[e]),E.a.createElement("span",null,t===i[e]?"\u731c\u5bf9":"\u731c\u9519"))}),E.a.createElement("p",{className:S.a.tit},E.a.createElement("span",null,"\u4f60\u603b\u5171\u7b54\u5bf9\u4e86",o,"\u9053\u9898"),E.a.createElement("span",null,"\u603b\u5171:",10*o,"\u5206")))))}},{key:"currentTime",get:function(){var t=this.state.currect;if(this.refs.audio)return 9==t?10:Math.floor(this.refs.audio.currentTime-this.state.time.start)}}]),u()(e,t),e}(y.Component),P=function(t){return n()({},t.playSongStore)};e.default=Object(L.connect)(P)(N)},sUZf:function(t,e){t.exports={wrap:"wrap___PmMZ-",header:"header___11hNS",section:"section___361t-",list:"list___1_Lzp",tit:"tit___O_dri",playScroll:"playScroll___1o52W",bottomBox:"bottomBox___nhp3t",pBottom:"pBottom___2W_Gm"}}});